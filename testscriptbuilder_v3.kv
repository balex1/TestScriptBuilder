#: kivy 1.9.0

<ExportPopup>
	BoxLayout:
		orientation: 'vertical'
		size_hint:1, 1
		Label:
			text: 'Configuration File'
			size_hint: 1, 0.1
		GridLayout:
			cols: 2
			size_hint: 1, 0.2
			Button:
				text: 'Find Config File'
				on_press: app.FindConfigurationFile(self, args[0])
			TextInput:
				id: config_text
		Button:
			text: 'Load Config File'
			size_hint: 1, 0.1
			on_press: app.LoadConfigurationFile(self, args[0])
		Label:
			text: 'Export File'
			size_hint: 1, 0.1
		GridLayout:
			cols: 2
			size_hint: 1, 0.2
			Button:
				text: 'Find Export File'
				on_press: app.FindExportFile(self, args[0])
			TextInput:
				id: export_dest_text
		GridLayout:
			cols: 2
			size_hint: 1, 0.2
			Label:
				text: 'Export Type'
			Spinner:
				text: 'Excel'
				values: 'Excel', 'HTML'
		Button:
			size_hint: 1, 0.1
			text: 'Export'
			on_press: app.ExportTestScript(self, args[0])

<TestScriptOptionsPopup>
	BoxLayout:
		orientation: 'vertical'
		size_hint: 1, 1
		Label:
			id: current_client
			size_hint: 1, 0.1
		GridLayout:
			cols: 2
			size_hint: 1, 0.1
			Label:
				text: 'Load Client'
			Spinner:
				id: load_client
		TextInput:
			size_hint: 1, 0.1
			hint_text: 'New Client'
			id: new_client
		Label:
			id: current_project
			size_hint: 1, 0.1
		GridLayout:
			cols: 2
			size_hint: 1, 0.1
			Label:
				text: 'Load Project'
			Spinner:
				id: load_project
		TextInput:
			size_hint: 1, 0.1
			hint_text: 'New Project'
			id: new_project
		Label:
			id: current_testscript
			size_hint: 1, 0.1
		GridLayout:
			cols: 2
			size_hint: 1, 0.1
			Label:
				text: 'Load Testscript'
			Spinner:
				id: load_testscript
		TextInput:
			size_hint: 1, 0.1
			hint_text: 'New Testscript'
			id: new_testscript
		Button:
			text: 'Save'
			size_hint: 1, 0.1
			on_press: app.SaveTestScriptPopup(self, args[0])
			
<LoadWorkflowPopup>
	spinner: loadflowpopup_flow
	lwp_workflow: lwp_workflow
	lwp_testscript: lwp_testscript
	lwp_client: lwp_client
	lwp_project: lwp_project
	BoxLayout:
		orientation: 'vertical'
		size_hint: 1, 1
		BoxLayout:
			orientation: 'horizontal'
			size_hint: 1, 0.3
			TextInput:
				size_hint: 0.5, 1
				hint_text: 'Workflow'
				on_text_validate: app.ApplyLoadWorkflowPopupFilter(self, args[0])
				multiline: False
				id: lwp_workflow
			TextInput:
				size_hint: 0.5, 1
				hint_text: 'Testscript'
				on_text_validate: app.ApplyLoadWorkflowPopupFilter(self, args[0])
				multiline: False
				id: lwp_testscript
		BoxLayout:
			orientation: 'horizontal'
			size_hint: 1, 0.3
			TextInput:
				size_hint: 0.5, 1
				hint_text: 'Client'
				on_text_validate: app.ApplyLoadWorkflowPopupFilter(self, args[0])
				multiline: False
				id: lwp_client
			TextInput:
				size_hint: 0.5, 1
				hint_text: 'Project'
				on_text_validate: app.ApplyLoadWorkflowPopupFilter(self, args[0])
				multiline: False
				id: lwp_project
		GridLayout:
			cols: 2
			size_hint: 1, 0.4
			Spinner:
				text: 'Flow'
				id: loadflowpopup_flow
			Button:
				text: 'Add'
				on_press: app.LoadFlow(self, args[0])
				size_hint: 1, 0.1
			
<AddToWorkflowPopup>
	spinner: addtoflowpopup_flow
	atwp_workflow: atwp_workflow
	atwp_testscript: atwp_testscript
	atwp_client: atwp_client
	atwp_project: atwp_project
	BoxLayout:
		orientation: 'vertical'
		size_hint: 1, 1
		BoxLayout:
			orientation: 'horizontal'
			size_hint: 1, 0.3
			TextInput:
				size_hint: 0.5, 1
				hint_text: 'Workflow'
				on_text_validate: app.ApplyWorkflowPopupFilter(self, args[0])
				multiline: False
				id: atwp_workflow
			TextInput:
				size_hint: 0.5, 1
				hint_text: 'Testscript'
				on_text_validate: app.ApplyWorkflowPopupFilter(self, args[0])
				multiline: False
				id: atwp_testscript
		BoxLayout:
			orientation: 'horizontal'
			size_hint: 1, 0.3
			TextInput:
				size_hint: 0.5, 1
				hint_text: 'Client'
				on_text_validate: app.ApplyWorkflowPopupFilter(self, args[0])
				multiline: False
				id: atwp_client
			TextInput:
				size_hint: 0.5, 1
				hint_text: 'Project'
				on_text_validate: app.ApplyWorkflowPopupFilter(self, args[0])
				multiline: False
				id: atwp_project
		GridLayout:
			cols: 2
			size_hint: 1, 0.4
			Spinner:
				text: 'Flow'
				id: addtoflowpopup_flow
			Button:
				text: 'Add'
				on_press: app.AddToFlow(self, args[0])
				size_hint: 1, 0.1
			
<CreateWorkflowPopup>
	new_flow: new_workflow_name_text
	spinner: createflowpopup_flow
	cwp_workflow: cwp_workflow
	cwp_testscript: cwp_testscript
	cwp_client: cwp_client
	cwp_project: cwp_project
	BoxLayout:
		orientation: 'vertical'
		size_hint: 1, 1
		TextInput:
			hint_text: 'Workflow Name'
			id: new_workflow_name_text
		BoxLayout:
			orientation: 'horizontal'
			size_hint: 1, 0.3
			TextInput:
				size_hint: 0.5, 1
				hint_text: 'Workflow'
				on_text_validate: app.ApplyCreateWorkflowPopupFilter(self, args[0])
				multiline: False
				id: cwp_workflow
			TextInput:
				size_hint: 0.5, 1
				hint_text: 'Testscript'
				on_text_validate: app.ApplyCreateWorkflowPopupFilter(self, args[0])
				multiline: False
				id: cwp_testscript
		BoxLayout:
			orientation: 'horizontal'
			size_hint: 1, 0.3
			TextInput:
				size_hint: 0.5, 1
				hint_text: 'Client'
				on_text_validate: app.ApplyCreateWorkflowPopupFilter(self, args[0])
				multiline: False
				id: cwp_client
			TextInput:
				size_hint: 0.5, 1
				hint_text: 'Project'
				on_text_validate: app.ApplyCreateWorkflowPopupFilter(self, args[0])
				multiline: False
				id: cwp_project
		GridLayout:
			cols: 3
			id: create_workflow_popup_results
			size_hint: 1, 0.4
			Spinner:
				text: 'TestScript'
				id: createflowpopup_flow
			Button:
				text: 'Add'
				on_press: app.CreateFlow(self, args[0])
				size_hint: 1, 0.1

<WorkflowScreen>
	drag_grid: node_editor
	grid_layout: grid_layout
	float_layout: float_layout
	BoxLayout:
		orientation: 'vertical'
		size: root.size
		ActionBar:
			size_hint: 1, 0.075
			ActionView:
				ActionPrevious:
					title: 'Workflows'
					app_icon: 'image/AO_Small_White.png'
					with_previous: False
				ActionOverflow:
				ActionGroup:
					id: filedropdown_kag
					text: 'Options'
					ActionButton:
						text: 'Quit'
						id: quit_kag
						on_press: app.Quit(self, args[0])
					ActionButton:
						text: 'Script Generation'
						on_press: app.AdvancedOptionsPopup_WF(self, args[0])
					ActionButton:
						text: 'Test Script Options'
						on_press: app.TestScriptPopup_WF(self, args[0])
					ActionButton:
						on_press: app.WFQuickActionPopup(self, args[0])
						text: 'Quick Action'
				ActionGroup:
					text: 'Navigation'
					ActionButton:
						text: 'Key Actions'
						id: workflownav_kag
						on_press: app.GoToKeyActionGroupPage(self, args[0])
					ActionButton:
						text: 'Analysis'
						id: analysisnav_kag
						on_press: app.GoToAnalysisPage(self, args[0])
		BoxLayout:
			size_hint: 1, 0.925
			BoxLayout:
				orientation: 'vertical'
				size_hint: 0.2, 1
				id: box_layout
				FloatLayout:
					size_hint: 1, 1
					BoxLayout:
					GridLayout:
						id: grid_layout
						rows: int(self.height / 20)
					FloatLayout:
						id: float_layout
			DragGrid:
				size_hint: 0.6, 1
				rows: 8
				id: node_editor
			BoxLayout:
				size_hint: 0.2, 1
				orientation: 'vertical'
				Button:
					size_hint: 1, 0.1
					text: 'Load Flow'
					on_press: app.LoadWorkflowPopup(self, args[0])
				Button:
					size_hint: 1, 0.1
					text: 'New Subflow'
					on_press: app.CreateNewSubflow(self, args[0])
				Label:
					size_hint: 1, 0.1
					text: 'Current Workflow'
				TextInput:
					size_hint: 1, 0.1
					id: current_wf
					on_text_validate: app.UpdateWorkflowName(self, args[0])
				WFCarouselItem:
					id: wf_carousel
					size_hint: 1, 0.45
				Button: 
					text: 'Save Flow'
					size_hint: 1, 0.075
					on_press: app.SaveWorkflow(self, args[0])
				Button: 
					text: 'Save Action'
					size_hint: 1, 0.075
					on_press: app.SaveAction(self, args[0])

<SelectableButton>:
	background_normal: 'image/Selection_Up.png'
	background_down: 'image/Selection_Down.png'
	on_press: self.SelectButton(self, args[0])
	
<ProductPanel>
	BoxLayout:
		size_hint: 1, 1
		orientation: 'vertical'
		GridLayout:
			cols: 2
			size_hint: 1, 0.2
			Label:
				text: 'Product'
			TextInput:
				id: product_text
		Label:
			text: 'Filter Settings'
			size_hint: 1, 0.1
		GridLayout:
			cols: 2
			size_hint: 1, 0.2
			Label:
				text: 'Columns'
			TextInput:
				id: numcols_text
		GridLayout:
			cols: 2
			size_hint: 1, 0.2
			Label:
				text: 'Rows'
			TextInput:
				id: numrows_text
		Button:
			text: 'Save'
			size_hint: 1, 0.2
			on_press: SaveProductPanel(self, args[0])
		Button:
			text: 'Save As Default'
			size_hint: 1, 0.1
			on_press: SaveProductPanelDefaults(self, args[0])
				
<ConnectionsPanel>
	BoxLayout:
		size_hint: 1, 1
		orientation: 'vertical'
		Label:
			text: 'Database Info'
			size_hint: 1, 0.1
		GridLayout:
			cols: 2
			size_hint: 1, 0.2
			Label:
				text: 'Database Name'
			TextInput:
				id: database_text
		Button:
			text: 'Find Database'
			size_hint: 1, 0.1
			on_press: app.FindDatabaseFile(self, args[0])
		Button:
			on_press: app.LoadDatabase(self, args[0])
			size_hint: 1, 0.1
			text: 'Load Database'
		Label:
			text: 'Excel Loader Info'
			size_hint: 1, 0.1
		GridLayout:
			cols: 2
			size_hint: 1, 0.2
			Label:
				text: 'Excel Sheet Name'
			TextInput:
				id: excel_loader_text
		Button:
			size_hint: 1, 0.1
			text: 'Find Excel Loader'
			on_press: app.FindExcelLoader(self, args[0])
		Button:
			size_hint: 1, 0.1
			text: 'Import Excel Loader'
			on_press: app.FindExcelLoader(self, args[0])

<KeyActionTabbedPanel>
	size_hint: 1, 1
	do_default_tab: False
	TabbedPanelItem:
		text: 'Product & Filter'
		ProductPanel:
			id: ka_prodpanel
	TabbedPanelItem:
		text: 'Connections'
		ConnectionsPanel:
			id: conn_panel

<KeyActionGroupScreen>:
	BoxLayout:
		orientation: 'vertical'
		size: root.size
		ActionBar:
			size_hint: 1, 0.075
			ActionView:
				ActionPrevious:
					title: 'Key Actions'
					app_icon: 'image/AO_Small_White.png'
					with_previous: False
				ActionOverflow:
				ActionGroup:
					id: filedropdown_kag
					text: 'Options'
					ActionButton:
						text: 'Advanced Options'
						on_press: app.AdvancedOptionsPopup_KAG(self, args[0])
					ActionButton:
						text: 'Quit'
						id: quit_kag
						on_press: app.Quit(self, args[0])
				ActionGroup:
					id: navigationdropdown_kag
					text: 'Navigation'
					ActionButton:
						text: 'Flow Editor'
						id: workflownav_kag
						on_press: app.GoToWorkflowPage(self, args[0])
					ActionButton:
						text: 'Analysis'
						id: analysisnav_kag
						on_press: app.GoToAnalysisPage(self, args[0])
		BoxLayout:
			size_hint: 1, 0.1
			GridLayout:
				size_hint: 0.195, 1
				rows: 2
				Label:
					text: 'Custom'
				GridLayout:
					cols: 2
					Switch:
						id: custswitch
					CheckBox:
						id: customfilter
			TextInput:
				hint_text: 'Module'
				id: modulefilter_kag
				size_hint: 0.225, 1
				background_normal: 'image/TextInput_Unselected.png'
				background_active: 'image/TextInput_Selected.png'
				multiline: False
				on_text_validate: app.ApplyFilterKAG(self, args[0])
			TextInput:
				hint_text: 'System Area'
				id: safilter_kag
				size_hint: 0.225, 1
				background_normal: 'image/TextInput_Unselected.png'
				background_active: 'image/TextInput_Selected.png'
				multiline: False
				on_text_validate: app.ApplyFilterKAG(self, args[0])
			TextInput:
				hint_text: 'Key Action'
				id: kafilter_kag
				size_hint: 0.225, 1
				background_normal: 'image/TextInput_Unselected.png'
				background_active: 'image/TextInput_Selected.png'
				multiline: False
				on_text_validate: app.ApplyFilterKAG(self, args[0])
			Button:
				on_press: app.ApplyFilterKAG(self, args[0])
				size_hint: 0.065, 1
				background_down: 'image/Filter_Button_Down.png'
				background_normal: 'image/Filter_Button_Up.png'
			Button:
				on_press: app.ClearFilterKAG(self, args[0])
				size_hint: 0.065, 1
				background_down: 'image/Clear_Button_Down.png'
				background_normal: 'image/Clear_Button_Up.png'
		BoxLayout:
			orientation: 'horizontal'
			size_hint:1, 0.825
			BoxLayout:
				size_hint:0.75, 1
				orientation: 'vertical'
				SelectableGrid:
					size_hint:1, 0.9
					cols: 4
					rows: 5
					id: selection_layout
				ActionBar:
					size_hint: 1, 0.1
					ActionView:
						ActionPrevious:
							app_icon: 'image/double_note_down.png'
							with_previous: False
						ActionOverflow:
						ActionButton:
							text: 'Last Page'
							on_press: app.LoadPrevPageKAG(self, args[0])
							background_down: 'image/PrevPage_Down.png'
							background_normal: 'image/PrevPage_Up.png'
						ActionButton:
							text: 'Next Page'
							on_press: app.LoadNextPageKAG(self, args[0])
							background_down: 'image/NextPage_Down.png'
							background_normal: 'image/NextPage_Up.png'
						ActionButton:
							on_press: app.ClearQuickAction(self, args[0])
							text: 'Quick Action'
						ActionGroup:
							text: 'Key Action'
							ActionButton:
								text: 'Edit Selected'
								on_press: app.LoadQuickAction(self, args[0])
							ActionButton:
								text: 'Duplicate'
								id: duplkeyaction_kag
								on_press: app.DuplicateKeyAction(self, args[0])
							ActionButton:
								text: 'Delete'
								id: deletekeyaction_kag
								on_press: app.DeleteKeyAction(self, args[0])
					
			BoxLayout:
				size_hint: 0.25, 1
				orientation: 'vertical'
				Button:
					size_hint: 1, 0.1
					text: 'Create Flow'
					on_press: app.CreateWorkflowPopup(self, args[0])
				Button:
					size_hint: 1, 0.1
					text: 'Add To Flow'
					on_press: app.AddToWorkflowPopup(self, args[0])
				Carousel:
					size_hint: 1, 0.7
					id: carousel_ka
				Button:
					size_hint: 1, 0.1
					text: 'Save'
					on_press: app.SaveQuickKeyAction(self, args[0])